## Context

OpenSplx is a fork of OpenSpec that adds PLX-specific functionality. PLX commands must coexist with OpenSpec commands without modifying OpenSpec's core workflow, ensuring upstream sync compatibility.

The architecture documentation feature enables technical agents and engineers to design features based solely on the architecture document, without needing to research the codebase first.

## Goals / Non-Goals

**Goals:**
- PLX slash commands installed during `plx init` alongside OpenSpec commands
- Architecture documentation generated by AI agents via slash commands
- Clean separation between PLX and OpenSpec functionality
- Archive workflow suggests (but does not require) architecture updates

**Non-Goals:**
- Automatic architecture generation (AI agents fill in the template)
- Modifying OpenSpec's core command structure
- Adding new CLI commands (only slash commands)

## Decisions

### Separate PLX Registry

**Decision:** Create a parallel `PlxSlashCommandRegistry` rather than extending `SlashCommandRegistry`.

**Rationale:** Keeps PLX functionality cleanly separated from OpenSpec core, allowing upstream sync without conflicts. The existing `SlashCommandId` type is specific to OpenSpec commands (proposal, apply, archive), and PLX commands are conceptually different.

### Template-Based Architecture Document

**Decision:** ARCHITECTURE.md uses a template structure that AI agents fill in, rather than auto-generating from code analysis.

**Rationale:**
- Auto-generation would require complex static analysis
- AI agents are better suited to understand architectural patterns
- Template provides consistent structure across projects
- Keeps the CLI tool lightweight

### Non-Automatic Archive Updates

**Decision:** Archive command suggests running `/plx/update-architecture` but does not execute it automatically.

**Rationale:**
- Keeps archive workflow fast and predictable
- Architecture updates are optional and context-dependent
- Avoids coupling archive success to AI agent availability

### Reuse OpenSpec Markers

**Decision:** PLX commands use the same `<!-- OPENSPEC:START -->` / `<!-- OPENSPEC:END -->` marker pattern.

**Rationale:** Consistency with existing marker system, allows `openspec update` to refresh PLX content if needed in the future.

## Risks / Trade-offs

**Risk:** PLX commands may not be generated for all AI tools initially.
**Mitigation:** Start with Claude Code support, add other tools as configurators are created following the established pattern.

**Risk:** Architecture document may become stale.
**Mitigation:** Archive suggestion reminds users to update; update-architecture command provides easy refresh path.

## Migration Plan

No migration required. This is additive functionality:
1. Existing OpenSpec installations continue to work unchanged
2. Running `plx init` in extend mode adds PLX commands to existing projects
3. No breaking changes to existing files or workflows

## Open Questions

None. The technical refinement spec in the issue provides complete implementation details.
